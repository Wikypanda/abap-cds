<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>09 Bits and Bytes - ABAP Cheat Sheet</title>
    <style>

        * {
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-top: 20px;
        }
        h2 {
            color: #2c3e50;
            border-bottom: 2px solid #95a5a6;
            padding-bottom: 8px;
            margin-top: 30px;
        }
        h3 {
            color: #34495e;
            margin-top: 25px;
        }
        h4, h5, h6 {
            color: #34495e;
            margin-top: 20px;
        }
        p {
            margin: 10px 0;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', Consolas, Monaco, monospace;
            color: #c7254e;
            font-size: 0.9em;
        }
        pre {
            background-color: #282c34;
            color: #abb2bf;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        pre code {
            background-color: transparent;
            color: inherit;
            padding: 0;
            font-size: 0.9em;
            line-height: 1.5;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
            background-color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #3498db;
            color: white;
            font-weight: bold;
        }
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        tr:hover {
            background-color: #f5f5f5;
        }
        ul, ol {
            margin: 10px 0;
            padding-left: 30px;
        }
        li {
            margin: 5px 0;
        }
        a {
            color: #3498db;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
            color: #2980b9;
        }
        hr {
            border: none;
            border-top: 2px solid #bdc3c7;
            margin: 30px 0;
        }
        .note {
            background-color: #d4edda;
            border-left: 4px solid #28a745;
            padding: 12px;
            margin: 15px 0;
            border-radius: 4px;
        }
        blockquote {
            border-left: 4px solid #3498db;
            padding-left: 15px;
            margin: 15px 0;
            color: #555;
            font-style: italic;
        }
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            table {
                font-size: 0.9em;
            }
            th, td {
                padding: 8px;
            }
        }
    
    </style>
</head>
<body>
<h1>Excursion Down to Bits and Bytes</h1>
<p>This sheet goes a bit into the technical background of data types and data objects. It may be helpful for a better understanding of how to handle data in ABAP including a glance on casting and conversions.</p>
<p>After its declaration, a <a href="https://help.sap.com/doc/abapdocu_cp_index_htm/CLOUD/en-US/index.htm?file=abendata_object_glosry.htm">data object</a> is usable in its context (procedure, class, program) according to its type. For example, a numeric data object can be assigned the result of a calculation:</p>
<div class="note">[!NOTE] For checking out the code snippets in [ABAP Cloud](https://help.sap.com/doc/abapdocu_cp_index_htm/CLOUD/en-US/index.htm?file=abenabap_cloud_glosry.htm), you can use the interface `if_oo_adt_classrun` in a class by implementing the method `if_oo_adt_classrun~main`.</div>
<pre><code>DATA num TYPE i.

num = 2 * 3 * 5 * 53 * 2267.

cl_demo_output=&gt;display( num ).</code></pre>
<p>After this assignment, the data object <code>num</code> contains the calculated value 3604530, which is also displayed accordingly with a type-compliant output as, for example, <code>cl_demo_output=&gt;display</code>. And of course the same can be seen in the display of the variable in the ABAP Debugger when setting a breakpoint at the last statement.</p>
<p>The ABAP Debugger also shows the hexadecimal value 32003700 of the data object. This directly represents the binary value <code>0011 0010 0000 0000 0011 0111 0000 0000</code> stored in the 4 bytes allocated to the 4-byte integer number in the memory. This value is platform dependent and for numeric types is defined by the <a href="https://help.sap.com/doc/abapdocu_cp_index_htm/CLOUD/en-US/index.htm?file=abenbyte_order_glosry.htm">byte order</a> order, where either the most significant (big endian) or least significant (little endian) byte is written to the first memory location. The decimal value of the hexadecimal value <code>32003700</code> shown here would be <code>838874880</code> and is not the integer value <code>3604530</code> that ABAP deals with. This shows the meaning of data types. A data object is a sequence of bytes stored in memory at its address, which is interpreted by the ABAP runtime framework according to the data type. The hexadecimal value is in most cases irrelevant to the programmer.</p>
<p>Let us now consider a character-like field text with a length of two characters:</p>
<pre><code>DATA text TYPE c LENGTH 2.

text = &#x27;2&#x27; &amp;&amp; &#x27;7&#x27;.

cl_demo_output=&gt;display( text ).</code></pre>
<p>This field can be assigned the result of a string operation as shown and the result shown by <code>cl_demo_output=&gt;display</code> as well as in the ABAP Debugger is the character string <code>27</code>. Again, it is the data type, that derives the value <code>27</code> from the actual hexadecimal content, which is <code>32003700</code> as in the previous example! In this case, <code>32003700</code> is the encoding of the string <code>27</code> in the Unicode character representation <a href="https://help.sap.com/doc/abapdocu_cp_index_htm/CLOUD/en-US/index.htm?file=abenucs2_glosry.htm">UCS-2</a>, which is supported by ABAP in Unicode systems. The Unicode character representation also depends on the platform-dependent byte order.</p>
<p>Only for a byte-type data type does the value as interpreted by ABAP directly correspond to the hexadecimal content. The following lines modify the bits of a byte string with a bit-operation:</p>
<pre><code>DATA hex TYPE x LENGTH 4 VALUE &#x27;CDFFC8FF&#x27;.

hex = BIT-NOT hex.

cl_demo_output=&gt;display( hex ).</code></pre>
<p>Here, the output with <code>cl_demo_output=&gt;display</code>, the value display of the ABAP Debugger as well as the hexadecimal value are the same, namely <code>32003700</code>.</p>
<p>In the above examples, we presented three data objects that all occupy 4 bytes in memory that have the same binary values, but are handled differently by ABAP due to their data type. The data type is also responsible for the fact, that different kind of operations (numeric calculation, string concatenation, bit-operation) can be applied to the respective data objects. Using these examples we can have now look at the basic concepts of <a href="https://help.sap.com/doc/abapdocu_cp_index_htm/CLOUD/en-US/index.htm?file=abencast_casting_glosry.htm">casting</a> and <a href="https://help.sap.com/doc/abapdocu_cp_index_htm/CLOUD/en-US/index.htm?file=abentype_conversion_glosry.htm">type conversion</a> and their relation to bits and bytes.</p>
<p>In ABAP, the term casting means nothing more than treating a data object according to a different data type than the one that is permanently assigned to it. This can be done using <a href="https://help.sap.com/doc/abapdocu_cp_index_htm/CLOUD/en-US/index.htm?file=abenfield_symbol_glosry.htm">field symbols</a>, with which a new (symbolic) name and a new type can be defined for the memory area of a data object. When the memory area is accessed using a field symbol, it is handled according to the type of the field symbol. The following lines show an example.</p>
<pre><code>DATA hex TYPE x LENGTH 4 VALUE &#x27;32003700&#x27;.
FIELD-SYMBOLS: &lt;num&gt;  TYPE i,
               &lt;text&gt; TYPE c.
ASSIGN hex TO &lt;num&gt;  CASTING.
ASSIGN hex TO &lt;text&gt; CASTING.

cl_demo_output=&gt;new(
  )-&gt;write_data( hex
  )-&gt;write_data( &lt;num&gt;
  )-&gt;write_data( &lt;text&gt; )-&gt;display( ).</code></pre>
<p>The bit string in <code>hex</code> is cast to a numeric field when accessed using the name <code>&lt;num&gt;</code> and to a text field when accessed using the name <code>&lt;text&gt;</code>. The outputs are <code>32003700</code>, <code>3604530</code> and <code>27</code>, clearly showing the effect of the data type on handling one and the same hexadecimal content.</p>
<p>In contrast, in a type conversion (or conversion for short), the actual binary content of a data object is converted so that it fits another data type. Type conversions usually occur in assignments between data objects of different data types. The goal of such a conversion is to preserve the type-specific meaning of the content in the source field as far as possible for the data type of the target field. For this purpose, ABAP contains a large set of <a href="https://help.sap.com/doc/abapdocu_cp_index_htm/CLOUD/en-US/index.htm?file=abenconversion_rules.htm">conversion rules</a>. A simple example is shown here:</p>
<pre><code>TYPES hex TYPE x LENGTH 4.
FIELD-SYMBOLS:
  &lt;hex_text&gt; TYPE hex,
  &lt;hex_num&gt;  TYPE hex.

DATA: text TYPE c LENGTH 2 VALUE &#x27;27&#x27;,
      num  TYPE i.

num = text.

ASSIGN text TO &lt;hex_text&gt; CASTING.
ASSIGN num  TO &lt;hex_num&gt;  CASTING.

cl_demo_output=&gt;new(
  )-&gt;write_data( text
  )-&gt;write_data( &lt;hex_text&gt;
  )-&gt;write_data( num
  )-&gt;write_data( &lt;hex_num&gt; )-&gt;display( ).</code></pre>
<p>We are assigning the character-like field <code>text</code> to the numeric field <code>num</code> and display the result that can also be checked in the ABAP Debugger. The ABAP runtime framework recognizes that the character string <code>27</code> in text can be interpreted as the integer number <code>27</code>, generates the hexadecimal value 1B000000 in which this number is encoded for the numeric type of <code>num</code>, and assigns it to the memory location of <code>num</code>. Thus, the actual conversion takes place for the original hexadecimal content <code>32003700</code> of <code>text</code> to the new hexadecimal content <code>1B000000</code> of <code>num</code>. For character strings in text fields, for which no such meaningful conversion is possible, an exception occurs. The field symbols <code>&lt;hex_text&gt;</code> and <code>&lt;hex_num&gt;</code> are used to show the hexadecimal content of the fields <code>text</code> and <code>num</code> by casting them to a byte-like type.</p>
<div class="note">[!TIP] For reasons of simplicity this sheet is restricted to named elementary</div>
<p>variables. Note that in particular the same holds for <a href="https://help.sap.com/doc/abapdocu_cp_index_htm/CLOUD/en-US/index.htm?file=abenabap_literal_glosry.htm">literals</a> that are handled internally in such a way as if they were constants of the data type assigned to the literal. In the preceding example, <code>text</code> can be replaced by a literal <code>&#x27;27&#x27;</code> yielding the same results.</p>
</body>
</html>